<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   DisasterEye — Create Your Account
  </title>
  <!-- Brand Typography -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Font Awesome 6 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet"/>
  <!-- SweetAlert2 -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.3/dist/sweetalert2.min.css" rel="stylesheet"/>
  <!-- Global Theme Styles -->
  <link href="style.css" rel="stylesheet"/>
  <!-- Page-specific CSS -->
  <link href="registration_page.css" rel="stylesheet"/>
 </head>
 <body class="d-flex flex-column min-vh-100">
  <!-- Public/Common Auth Header -->
  <header class="navbar navbar-expand bg-white border-bottom shadow-sm" style="--primary:#FF0000; --secondary:#FFD700;">
   <div class="container-fluid">
    <button aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle sidebar" class="btn d-md-none" data-bs-target="#sidebarMenu" data-bs-toggle="collapse" type="button">
     <i class="fa-solid fa-bars">
     </i>
    </button>
    <a class="navbar-brand d-flex align-items-center gap-2" href="./registration_page.html">
     <img alt="Logo" onerror="this.onerror=null;this.src='https://picsum.photos/seed/disastereye-logo/28/28'" src="https://dsaishared.blob.core.windows.net/uxcceleratecontainer/projects/68c2bc58b3f88442584e5f26/logos/logo_07c28723-6add-4475-a1c8-2b377d0b765d.jpg" style="height:28px;"/>
     <span class="fw-bold" style="color:var(--primary)">
      DisasterEye
     </span>
    </a>
    <div class="ms-auto d-flex align-items-center gap-2">
     <a class="btn btn-outline-danger btn-sm" href="./login_page.html">
      <i class="fa-solid fa-right-to-bracket me-1">
      </i>
      Log In
     </a>
     <a class="btn btn-danger btn-sm" href="./registration_page.html" style="background-color:#FF0000; border-color:#FF0000;">
      <i class="fa-solid fa-user-plus me-1">
      </i>
      Sign Up
     </a>
    </div>
   </div>
  </header>
  <!-- Main Content Area with Sidebar and Form -->
  <div class="container-fluid flex-grow-1">
   <div class="d-flex">
    <!-- Component: Public/Common Auth Sidebar (visible on md+; collapsible on mobile) -->
    <nav class="collapse d-md-block bg-light border-end" id="sidebarMenu" style="min-height:100vh; width:260px;">
     <div class="position-sticky">
      <div class="p-3 border-bottom d-flex align-items-center gap-2">
       <img alt="DisasterEye Logo" onerror="this.onerror=null;this.src='https://picsum.photos/seed/disastereye-logo/32/32'" src="https://dsaishared.blob.core.windows.net/uxcceleratecontainer/projects/68c2bc58b3f88442584e5f26/logos/logo_07c28723-6add-4475-a1c8-2b377d0b765d.jpg" style="height:32px;"/>
       <span class="fw-bold">
        DisasterEye
       </span>
      </div>
      <div class="p-3">
       <div class="mb-3 small text-muted">
        Welcome. Please sign in or create an account.
       </div>
       <ul class="nav nav-pills flex-column gap-1">
        <li class="nav-item">
         <a class="nav-link d-flex align-items-center" href="./login_page.html">
          <i class="fa-solid fa-right-to-bracket me-2 text-danger">
          </i>
          Log In
         </a>
        </li>
        <li class="nav-item">
         <a aria-current="page" class="nav-link d-flex align-items-center active" href="./registration_page.html">
          <i class="fa-solid fa-user-plus me-2 text-danger">
          </i>
          Register
         </a>
        </li>
        <li class="nav-item">
         <a class="nav-link d-flex align-items-center" href="./password_reset.html">
          <i class="fa-solid fa-key me-2 text-danger">
          </i>
          Password Reset
         </a>
        </li>
        <li class="nav-item">
         <a class="nav-link d-flex align-items-center" href="./verification_page.html">
          <i class="fa-solid fa-envelope-circle-check me-2 text-danger">
          </i>
          Verify Account
         </a>
        </li>
       </ul>
       <hr/>
       <div class="small text-muted d-flex align-items-center">
        <i class="fa-solid fa-circle-question me-2 text-warning">
        </i>
        Need help? See FAQs after sign-in
       </div>
      </div>
     </div>
    </nav>
    <!-- Registration Form Section -->
    <main class="flex-grow-1 p-3 p-lg-4">
     <div class="container-max">
      <div class="row justify-content-center">
       <div class="col-12 col-lg-8 col-xl-7">
        <div class="login-form-container mb-4">
         <!-- Form Header -->
         <div class="mb-3">
          <h1 class="page-title mb-1">
           Create Your Account
          </h1>
          <p class="text-muted">
           Join DisasterEye to stay safe and informed.
          </p>
         </div>
         <!-- System Feedback Area -->
         <div class="alert alert-danger d-none" id="serverFeedback" role="alert">
          <i class="fa-solid fa-circle-exclamation me-2">
          </i>
          <span id="serverFeedbackText">
           There was a problem with your submission.
          </span>
         </div>
         <!-- Registration Form -->
         <form class="sign-up-form" id="registrationForm" novalidate="">
          <!-- Full Name -->
          <div class="mb-3">
           <label class="form-label" for="fullName">
            Full Name
           </label>
           <input class="form-control" id="fullName" name="fullName" placeholder="Enter your full name" required="" type="text"/>
           <div class="invalid-feedback">
            Please enter your full name using letters and spaces only.
           </div>
          </div>
          <!-- Email -->
          <div class="mb-3">
           <label class="form-label" for="email">
            Email Address
           </label>
           <input class="form-control" id="email" name="email" placeholder="you@example.com" required="" type="email"/>
           <div class="invalid-feedback">
            Please enter a valid email address.
           </div>
          </div>
          <!-- Password with visibility toggle & strength -->
          <div class="mb-3">
           <label class="form-label" for="password">
            Password
           </label>
           <div class="input-group">
            <input aria-describedby="passwordHelp" class="form-control password-input-field" id="password" name="password" placeholder="Enter a strong password" required="" type="password"/>
            <button aria-label="Toggle password visibility" class="btn btn-light toggle-visibility-icon" id="togglePassword" type="button">
             <i class="fa-regular fa-eye">
             </i>
            </button>
           </div>
           <div class="form-text" id="passwordHelp">
            Must be at least 8 characters and include uppercase, lowercase, number, and special character.
           </div>
           <div class="mt-2">
            <div aria-label="Password strength" aria-valuemax="100" aria-valuemin="0" class="progress" role="progressbar">
             <div class="progress-bar" id="passwordStrengthBar" style="width: 0%">
             </div>
            </div>
            <small class="text-muted" id="passwordStrengthText">
             Strength: Very weak
            </small>
           </div>
           <div class="invalid-feedback">
            Password does not meet the complexity requirements.
           </div>
          </div>
          <!-- Confirm Password -->
          <div class="mb-3">
           <label class="form-label" for="confirmPassword">
            Confirm Password
           </label>
           <div class="input-group">
            <input class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Re-enter your password" required="" type="password"/>
            <button aria-label="Toggle confirm password visibility" class="btn btn-light toggle-visibility-icon" id="toggleConfirmPassword" type="button">
             <i class="fa-regular fa-eye">
             </i>
            </button>
           </div>
           <div class="invalid-feedback">
            Passwords must match.
           </div>
          </div>
          <!-- Role Selector -->
          <div class="mb-3">
           <label class="form-label">
            I am a(n):
           </label>
           <div aria-label="Select your role" class="row g-2" role="radiogroup">
            <div class="col-12 col-md-4">
             <input autocomplete="off" class="btn-check" id="roleIndividual" name="role" required="" type="radio" value="Individual User"/>
             <label class="role-card w-100" for="roleIndividual">
              <i class="fa-solid fa-user">
              </i>
              <span>
               Individual User
              </span>
             </label>
            </div>
            <div class="col-12 col-md-4">
             <input autocomplete="off" class="btn-check" id="roleLeader" name="role" required="" type="radio" value="Community Leader"/>
             <label class="role-card w-100" for="roleLeader">
              <i class="fa-solid fa-people-group">
              </i>
              <span>
               Community Leader
              </span>
             </label>
            </div>
            <div class="col-12 col-md-4">
             <input autocomplete="off" class="btn-check" id="roleAuthority" name="role" required="" type="radio" value="Local Authority"/>
             <label class="role-card w-100" for="roleAuthority">
              <i class="fa-solid fa-shield-halved">
              </i>
              <span>
               Local Authority
              </span>
             </label>
            </div>
           </div>
           <div class="invalid-feedback d-block d-none" id="roleError">
            Please select a role to continue.
           </div>
          </div>
          <!-- Legal Agreement -->
          <div class="mb-3 form-check">
           <input class="form-check-input" id="terms" required="" type="checkbox" value="1"/>
           <label class="form-check-label" for="terms">
            I agree to the
            <a href="./terms.html" rel="noopener" target="_blank">
             Terms of Service
            </a>
            and
            <a href="./privacy.html" rel="noopener" target="_blank">
             Privacy Policy
            </a>
            .
           </label>
           <div class="invalid-feedback">
            You must agree before submitting.
           </div>
          </div>
          <!-- Actions -->
          <div class="d-flex align-items-center gap-2">
           <button class="btn btn-danger submit-button" disabled="" id="registerBtn" type="submit">
            <span class="btn-label">
             <i class="fa-solid fa-user-plus me-1">
             </i>
             Register
            </span>
            <span aria-hidden="true" class="spinner-border spinner-border-sm ms-2 d-none" role="status">
            </span>
           </button>
           <a class="text-decoration-none" href="./login_page.html">
            Already have an account? Log In
           </a>
          </div>
         </form>
        </div>
        <!-- Security Tips / Info -->
        <div class="alert alert-info mb-0" role="alert">
         <i class="fa-solid fa-circle-info me-2">
         </i>
         Tip: Use a unique passphrase you don't use elsewhere.
        </div>
       </div>
      </div>
     </div>
    </main>
   </div>
  </div>
  <!-- Public/Common Auth Footer -->
  <footer class="border-top mt-auto bg-light">
   <div class="container py-3 d-flex flex-wrap align-items-center justify-content-between small">
    <div class="d-flex align-items-center gap-2">
     <img alt="Logo" onerror="this.onerror=null;this.src='https://picsum.photos/seed/disastereye-footer/20/20'" src="https://dsaishared.blob.core.windows.net/uxcceleratecontainer/projects/68c2bc58b3f88442584e5f26/logos/logo_07c28723-6add-4475-a1c8-2b377d0b765d.jpg" style="height:20px;"/>
     <span class="text-muted">
      © 2025 DisasterEye
     </span>
    </div>
    <ul class="nav">
     <li class="nav-item">
      <a class="nav-link px-2 text-muted" href="./terms.html">
       Terms
      </a>
     </li>
     <li class="nav-item">
      <a class="nav-link px-2 text-muted" href="./privacy.html">
       Privacy
      </a>
     </li>
     <li class="nav-item">
      <a class="nav-link px-2 text-muted" href="./contact.html">
       Contact
      </a>
     </li>
    </ul>
   </div>
  </footer>
  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
  </script>
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.3/dist/sweetalert2.all.min.js">
  </script>
  <script>
   // Registration Page Interactivity & Validation
(function() {
    const form = document.getElementById('registrationForm');
    const fullName = document.getElementById('fullName');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirmPassword');
    const terms = document.getElementById('terms');
    const roleError = document.getElementById('roleError');
    const registerBtn = document.getElementById('registerBtn');
    const spinner = registerBtn.querySelector('.spinner-border');
    const serverFeedback = document.getElementById('serverFeedback');
    const serverFeedbackText = document.getElementById('serverFeedbackText');
    const strengthBar = document.getElementById('passwordStrengthBar');
    const strengthText = document.getElementById('passwordStrengthText');

    const nameRegex = /^[A-Za-zÀ-ÖØ-öø-ÿ'\-\s]{2,}$/;
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;

    function hasUpper(s) {
        return /[A-Z]/.test(s)
    }

    function hasLower(s) {
        return /[a-z]/.test(s)
    }

    function hasNumber(s) {
        return /\d/.test(s)
    }

    function hasSpecial(s) {
        return /[^A-Za-z0-9]/.test(s)
    }

    function evaluatePassword(pw) {
        let score = 0;
        if (pw.length >= 8) score += 25;
        if (hasUpper(pw)) score += 15;
        if (hasLower(pw)) score += 15;
        if (hasNumber(pw)) score += 20;
        if (hasSpecial(pw)) score += 25;
        score = Math.min(score, 100);
        return score;
    }

    function updateStrengthUI() {
        const pw = password.value || '';
        const score = evaluatePassword(pw);
        strengthBar.style.width = score + '%';
        let label = 'Very weak';
        let barClass = 'bg-danger';
        if (score >= 80) {
            label = 'Strong';
            barClass = 'bg-success';
        } else if (score >= 60) {
            label = 'Good';
            barClass = 'bg-info';
        } else if (score >= 40) {
            label = 'Fair';
            barClass = 'bg-warning';
        } else {
            label = 'Very weak';
            barClass = 'bg-danger';
        }
        strengthBar.className = 'progress-bar ' + barClass;
        strengthText.textContent = 'Strength: ' + label;
    }

    function validateFullName() {
        const valid = nameRegex.test(fullName.value.trim());
        fullName.classList.toggle('is-invalid', !valid);
        fullName.classList.toggle('is-valid', valid);
        return valid;
    }

    function validateEmail() {
        const valid = emailRegex.test(email.value.trim());
        email.classList.toggle('is-invalid', !valid);
        email.classList.toggle('is-valid', valid);
        return valid;
    }

    function validatePassword() {
        const pw = password.value;
        const valid = pw.length >= 8 && hasUpper(pw) && hasLower(pw) && hasNumber(pw) && hasSpecial(pw);
        password.classList.toggle('is-invalid', !valid);
        password.classList.toggle('is-valid', valid);
        return valid;
    }

    function validateConfirmPassword() {
        const match = password.value && confirmPassword.value && password.value === confirmPassword.value;
        confirmPassword.classList.toggle('is-invalid', !match);
        confirmPassword.classList.toggle('is-valid', match);
        return match;
    }

    function validateRole() {
        const selected = !!document.querySelector('input[name="role"]:checked');
        roleError.classList.toggle('d-none', selected);
        return selected;
    }

    function validateTerms() {
        if (!terms) return false;
        const valid = terms.checked;
        terms.classList.toggle('is-invalid', !valid);
        return valid;
    }

    function updateSubmitState() {
        const allValid = validateFullName() && validateEmail() && validatePassword() && validateConfirmPassword() && validateRole() && validateTerms();
        registerBtn.disabled = !allValid;
    }

    // Event Listeners for Validation
    fullName.addEventListener('input', updateSubmitState);
    fullName.addEventListener('blur', validateFullName);

    email.addEventListener('input', updateSubmitState);
    email.addEventListener('blur', validateEmail);

    password.addEventListener('input', function() {
        updateStrengthUI();
        updateSubmitState();
    });
    password.addEventListener('blur', function() {
        validatePassword();
        updateSubmitState();
    });

    confirmPassword.addEventListener('input', updateSubmitState);
    confirmPassword.addEventListener('blur', function() {
        validateConfirmPassword();
        updateSubmitState();
    });

    document.querySelectorAll('input[name="role"]').forEach(r => {
        r.addEventListener('change', function() {
            validateRole();
            updateSubmitState();
        });
    });

    terms.addEventListener('change', updateSubmitState);

    // Password visibility toggles
    document.getElementById('togglePassword').addEventListener('click', function() {
        const isText = password.getAttribute('type') === 'text';
        password.setAttribute('type', isText ? 'password' : 'text');
        this.querySelector('i').className = isText ? 'fa-regular fa-eye' : 'fa-regular fa-eye-slash';
    });
    document.getElementById('toggleConfirmPassword').addEventListener('click', function() {
        const isText = confirmPassword.getAttribute('type') === 'text';
        confirmPassword.setAttribute('type', isText ? 'password' : 'text');
        this.querySelector('i').className = isText ? 'fa-regular fa-eye' : 'fa-regular fa-eye-slash';
    });

    // Initial UI setup
    updateStrengthUI();
    updateSubmitState();

    function setLoading(isLoading) {
        registerBtn.disabled = isLoading || registerBtn.disabled;
        spinner.classList.toggle('d-none', !isLoading);
    }

    function showServerError(message) {
        serverFeedbackText.textContent = message || 'Something went wrong. Please try again.';
        serverFeedback.classList.remove('d-none');
    }

    function hideServerError() {
        serverFeedback.classList.add('d-none');
    }

    // Simulated submit handler
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        hideServerError();
        if (!validateFullName() || !validateEmail() || !validatePassword() || !validateConfirmPassword() || !validateRole() || !validateTerms()) {
            updateSubmitState();
            showServerError('Please fix the highlighted fields and try again.');
            return;
        }

        setLoading(true);

        // Simulate API call and email uniqueness check
        const formData = {
            fullName: fullName.value.trim(),
            email: email.value.trim(),
            password: password.value,
            role: document.querySelector('input[name="role"]:checked').value,
            termsAccepted: terms.checked
        };

        // Simulate server latency
        setTimeout(() => {
            // Simple mock: reject if email contains 'exists' or equals this sample
            const emailLower = formData.email.toLowerCase();
            if (emailLower.includes('exists') || emailLower === 'taken@example.com') {
                setLoading(false);
                showServerError('This email is already registered. Please use a different email or log in.');
                Swal.fire({
                    icon: 'error',
                    title: 'Email Already In Use',
                    text: 'Please try another email or log in if you already have an account.',
                    confirmButtonColor: '#FF0000'
                });
                return;
            }

            // Success flow
            Swal.fire({
                icon: 'success',
                title: 'Account Created',
                html: 'Welcome, <b>' + formData.fullName + '</b>! Please verify your email to finish setting up your account.',
                confirmButtonText: 'Go to Verification',
                confirmButtonColor: '#FF0000'
            }).then(() => {
                window.location.href = './verification_page.html';
            });
            setLoading(false);
        }, 1200);
    });
})();
  </script>
 </body>
</html>
